var W=Object.defineProperty,Q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var R=(l,n,a)=>n in l?W(l,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[n]=a,p=(l,n)=>{for(var a in n||(n={}))B.call(n,a)&&R(l,a,n[a]);if(A)for(var a of A(n))V.call(n,a)&&R(l,a,n[a]);return l},x=(l,n)=>Q(l,z(n));import{j as q,L as O,r as m,Q as o,_ as H,R as L,a as U,b as k,c as Y,B as G}from"./vendor.98a23334.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerpolicy&&(r.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?r.credentials="include":c.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(c){if(c.ep)return;c.ep=!0;const r=a(c);fetch(c.href,r)}};K();const e=q.exports.jsx,t=q.exports.jsxs;function X(){return t("div",{className:"navbar bg-primary text-primary-content sticky",children:[e("label",{htmlFor:"my-drawer-2",className:"btn btn-primary drawer-button lg:hidden",children:e("i",{className:"fa-solid fa-bars"})}),e("div",{className:"flex-1",children:e("a",{className:"btn btn-ghost normal-case text-xl",children:"daisyUI"})}),e("div",{children:t("div",{className:"dropdown dropdown-end",children:[e("label",{tabIndex:0,className:"btn btn-ghost btn-circle avatar",children:e("div",{className:"w-10 rounded-full",children:e("img",{src:""})})}),t("ul",{tabIndex:0,className:"mt-3 p-2 shadow menu menu-compact dropdown-content bg-base-100 rounded-box w-52",children:[e("li",{children:t("a",{className:"justify-between",children:["Profile",e("span",{className:"badge",children:"New"})]})}),e("li",{children:e("a",{children:"Settings"})}),e("li",{children:e("a",{children:"Logout"})})]})]})})]})}function Z(){return t("div",{className:"drawer-side border-2 border-blue-500",children:[e("label",{htmlFor:"my-drawer-2",className:"drawer-overlay"}),t("ul",{className:"menu p-4 w-80 bg-base-100 text-base-content",children:[e("li",{children:e(O,{to:"/",children:"Dashboard"})}),e("li",{children:e(O,{to:"inventory",children:"Inventory"})}),e("li",{children:e(O,{to:"sales",children:"Sales"})})]})]})}function ee(l){m.exports.useEffect(()=>{o.init({inputStream:{type:"LiveStream",constraints:{width:800,height:300,facingMode:"environment",aspectRatio:{min:1,max:2}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:4,frequency:20,decoder:{readers:["i2of5_reader"]},locate:!0},function(a){return a&&console.log(a,"error msg"),o.start(),()=>{o.stop()}}),o.onProcessed(a=>{var s=o.canvas.ctx.overlay,c=o.canvas.dom.overlay;a&&(a.boxes&&(s.clearRect(0,0,Number(c.getAttribute("width")),Number(c.getAttribute("height"))),a.boxes.filter(function(r){return r!==a.box}).forEach(function(r){o.ImageDebug.drawPath(r,{x:0,y:1},s,{color:"green",lineWidth:2})})),a.box&&o.ImageDebug.drawPath(a.box,{x:0,y:1},s,{color:"#00F",lineWidth:2}),a.codeResult&&a.codeResult.code&&o.ImageDebug.drawPath(a.line,{x:"x",y:"y"},s,{color:"red",lineWidth:3}))}),o.onDetected(n)},[]);function n(a){l.onDetected(a.codeResult.code)}return e("div",{id:"interactive",className:"viewport"})}function te(l){const[n,a]=m.exports.useState(!1),[s,c]=m.exports.useState(null),[r,h]=m.exports.useState({product:"",cost:0,id:"",qty:0});async function D(u){u.preventDefault();const b=p({},r);console.log("what is this: ",b);const y=await fetch("http://localhost:4000/api/inventory",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}}),g=await y.json();y.ok||(h(v=>x(p({},v),{error:g.error})),console.log(r.error)),y.ok&&(h(v=>x(p({},v),{product:"",cost:0,id:"",qty:0,error:null})),l.addProduct(g),console.log("New product added: ",g))}function N(u){const{product:b,cost:y,id:g,qty:v,value:T,name:S}=u.target;h(I=>x(p({},I),{[S]:T}))}function P(u){c(u),h(b=>x(p({},b),{id:u})),a(!1),o.stop()}return t("div",{className:"",children:[e("input",{type:"checkbox",id:"my-modal-4",className:"modal-toggle"}),e("label",{htmlFor:"my-modal-4",className:"modal cursor-pointer items-center",children:t("label",{className:"modal-box rounded-2xl flex flex-col gap-y-2",htmlFor:"",children:[t("form",{onSubmit:D,children:[t("div",{className:"flex gap-x-2",children:[t("div",{className:"flex flex-col grow",children:[e("span",{children:"Product Name"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"product",value:r.product,onChange:N})]}),t("div",{className:"flex flex-col grow",children:[e("span",{children:"Cost"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"cost",value:r.cost,onChange:N})]})]}),e("div",{children:t("div",{className:"flex gap-x-2 items-center",children:[t("div",{className:"flex flex-col grow",children:[t("div",{className:"tooltip tooltip-right pb-2 text-lg self-start","data-tip":"Scan product for ID",children:[e("span",{children:"ID: "}),e("i",{className:"fa-solid fa-circle-info ml-2"})]}),e("input",{value:r.id,onChange:N,name:"id",type:"text",readOnly:!0,placeholder:"Scan for ID...",className:"input input-bordered w-full max-w-xs",required:!0})]}),t("div",{className:"flex flex-col grow",children:[e("span",{className:"pb-2",children:"Qty"}),e("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",value:r.qty,onChange:N,name:"qty"})]})]})}),t("div",{className:"flex justify-between py-3",children:[e("button",{type:"button",className:"btn btn-secondary",onClick:()=>a(u=>!u),children:n?t("span",{children:[e("i",{className:"fa-solid fa-stop"})," Stop"]}):t("span",{children:[e("i",{className:"fa-solid fa-camera"})," Scan"]})}),t("button",{type:"submit",className:"btn btn-primary",children:["Add ",e("i",{className:"fa-solid fa-plus ml-2 text-lg"})]})]})]}),e("div",{className:"container",children:n&&e(ee,{onDetected:P})})]})})]})}function ae(l){function n(){l.deleteProduct(l.product._id)}return t("div",{children:[e("input",{type:"checkbox",id:"delete-item",className:"modal-toggle"}),e("div",{className:"modal",children:t("div",{className:"modal-box relative",children:[e("label",{htmlFor:"delete-item",className:"absolute right-4 top-2 text-neutral hover:text-neutral-focus hover:cursor-pointer",children:e("i",{className:"fa-solid fa-xmark fa-lg"})}),e("div",{className:"flex justify-center",children:e("div",{className:"border-4 border-error p-4 px-8 rounded-full",children:e("i",{className:"fa-solid fa-exclamation text-4xl text-error"})})}),e("p",{className:"py-6 text-center text-xl font-medium",children:"Delete?"}),t("div",{className:"flex justify-evenly",children:[e("label",{htmlFor:"delete-item",className:"btn btn-outline btn-error",onClick:n,children:"Yes, delete"}),e("label",{htmlFor:"delete-item",className:"btn btn-outline",children:"No, cancel"})]})]})})]})}function le(l){const[n,a]=m.exports.useState({product:"",cost:0,id:"",qty:0});m.exports.useEffect(()=>{Object.keys(l.product).length>0&&a(l.product)},[l.product]);function s(r){a(h=>x(p({},h),{[r.target.name]:r.target.value}))}async function c(){const r=p({},n);await(await fetch("http://localhost:4000/api/inventory/"+l.product._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json(),l.fetchInventory()}return t("div",{children:[e("input",{type:"checkbox",id:"edit-item",className:"modal-toggle"}),e("div",{className:"modal",children:t("div",{className:"modal-box rounded-2xl flex flex-col gap-y-2",children:[e("div",{className:"modal-action m-0",children:e("label",{htmlFor:"edit-item",className:"text-neutral hover:text-neutral-focus hover:cursor-pointer",children:e("i",{className:"fa-solid fa-xmark fa-lg"})})}),t("form",{children:[t("div",{className:"flex gap-x-2",children:[t("div",{className:"flex flex-col grow",children:[e("span",{children:"Product Name"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"product",onChange:s,value:n.product})]}),t("div",{className:"flex flex-col grow",children:[e("span",{children:"Cost"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"cost",onChange:s,value:n.cost})]})]}),e("div",{children:t("div",{className:"flex gap-x-2 items-center",children:[t("div",{className:"flex flex-col grow",children:[t("div",{className:"tooltip tooltip-right pb-2 text-lg self-start","data-tip":"Scan product for ID",children:[e("span",{children:"ID: "}),e("i",{className:"fa-solid fa-circle-info ml-2"})]}),e("input",{name:"id",type:"text",readOnly:!0,placeholder:"Scan for ID...",className:"input input-bordered w-full max-w-xs",onChange:s,value:n.id,required:!0})]}),t("div",{className:"flex flex-col grow",children:[e("span",{className:"pb-2",children:"Qty"}),e("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"qty",onChange:s,value:n.qty})]})]})})]}),e("div",{className:"modal-action",children:e("label",{htmlFor:"edit-item",className:"btn",onClick:c,children:"Save All"})})]})})]})}function ne(l){m.exports.useEffect(()=>{o.init({inputStream:{type:"LiveStream",target:document.querySelector("#ScanSoldItems"),constraints:{height:"100%",facingMode:"environment",aspectRatio:{min:1,max:2}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:4,frequency:20,decoder:{readers:["i2of5_reader"]},locate:!0},function(a){return a&&console.log(a,"error msg"),o.start(),()=>{o.stop()}}),o.onProcessed(a=>{var s=o.canvas.ctx.overlay,c=o.canvas.dom.overlay;a&&(a.boxes&&(s.clearRect(0,0,Number(c.getAttribute("width")),Number(c.getAttribute("height"))),a.boxes.filter(function(r){return r!==a.box}).forEach(function(r){o.ImageDebug.drawPath(r,{x:0,y:1},s,{color:"green",lineWidth:2})})),a.box&&o.ImageDebug.drawPath(a.box,{x:0,y:1},s,{color:"#00F",lineWidth:2}),a.codeResult&&a.codeResult.code&&o.ImageDebug.drawPath(a.line,{x:"x",y:"y"},s,{color:"red",lineWidth:3}))}),o.onDetected(n)},[]);function n(a){l.onDetected(a.codeResult.code)}return e("div",{id:"ScanSoldItems",className:"viewport"})}function re(l){function n(s){l.onDetected(s)}function a(){o.offDetected(),o.stop(),l.toggleCamera()}return t("div",{children:[e("input",{type:"checkbox",id:"scan-sold-items",className:"modal-toggle"}),e("div",{className:"modal",children:t("div",{className:"modal-box relative pb-10",children:[t("h3",{className:"text-lg font-bold",children:["Items Scanned: ",l.soldItems.length]}),l.camera&&e(ne,{onDetected:n}),!l.camera&&t("span",{className:"block text-primary text-center text-4xl py-6",children:["Item Scanned! ",e("i",{className:"fa-solid fa-square-check"})]}),e("label",{onClick:a,htmlFor:"scan-sold-items",className:"btn btn-md btn-primary absolute right-2 bottom-2",children:"Done"})]})})]})}function ce(l){return t("div",{className:"flex flex-col grow p-4 bg-neutral-content rounded-md",children:[t("div",{className:"",children:[e("h1",{className:"text-4xl font-bold py-2",children:"$"}),e("span",{className:"text-neutral py-2",children:"Sales"})]}),e(H,{options:l.graphOptions,series:l.graphOptions.series,type:"area",width:"100%",height:"600"})]})}function se(){return t("div",{className:"flex justify-between",children:[e("div",{className:"stats shadow",children:t("div",{className:"stat",children:[e("div",{className:"stat-title",children:"Total Page Views"}),e("div",{className:"stat-value",children:"89,400"}),e("div",{className:"stat-desc",children:"21% more than last month"})]})}),e("div",{className:"stats shadow",children:t("div",{className:"stat",children:[e("div",{className:"stat-title",children:"Total Page Views"}),e("div",{className:"stat-value",children:"89,400"}),e("div",{className:"stat-desc",children:"21% more than last month"})]})}),e("div",{className:"stats shadow",children:t("div",{className:"stat",children:[e("div",{className:"stat-title",children:"Total Page Views"}),e("div",{className:"stat-value",children:"89,400"}),e("div",{className:"stat-desc",children:"21% more than last month"})]})})]})}function oe(l){console.log(l.latestTransactions);const n=l.latestTransactions.map((a,s)=>{const c=["January","February","March","April","May","June","July","August","September","October","November","December"];return e("tbody",{children:t("tr",{children:[e("th",{children:s+1}),e("td",{children:a[0].product}),e("td",{children:`${c[a[0].date.getMonth()]} ${a[0].date.getDay()} ${a[0].date.getFullYear()} ${a[0].date.getHours()-12}:${a[0].date.getMinutes()}`}),e("td",{children:a[0].cost}),e("td",{})]})},s)});return t("div",{className:"home-container bg-base-200 p-2 overflow-auto h-full",children:[t("section",{className:"flex flex-col xl:flex-row xl:gap-x-4 rounded-md p-2 gap-y-4",children:[e(ce,{soldItems:l.soldItems,graphOptions:l.graphOptions}),t("section",{className:"overflow-auto bg-neutral-content rounded-md p-5",children:[t("div",{children:[e("span",{className:"block text-xl font-bold py-2",children:"Latest Transactions"}),e("span",{className:"block py-2 text-neutral",children:"This is a list of latest transactions"})]}),e("div",{className:"overflow-x-auto",children:t("table",{className:"table table-compact w-full",children:[e("thead",{children:t("tr",{children:[e("th",{}),e("th",{children:"Transaction"}),e("th",{children:"Date & Time"}),e("th",{children:"Amount"}),e("th",{children:"Qty"})]})}),n]})})]})]}),e("section",{className:"flex flex-col p-2 gap-y-4",children:e(se,{})})]})}function de(l){function n(){l.handleId(l.inventory._id),console.log(l.inventory._id)}return e("tbody",{className:"",children:t("tr",{className:"hover border-b-2 border-base-200",children:[e("td",{children:l.numOfItem+1}),e("td",{children:l.inventory.product}),t("td",{children:["#",l.inventory.id.slice(-5)]}),t("td",{children:["$ ",l.inventory.cost]}),e("td",{children:l.inventory.qty}),t("td",{className:"flex gap-x-2",children:[t("label",{htmlFor:"edit-item",className:"btn btn-info btn-sm normal-case",onClick:n,children:[e("i",{className:"fa-solid fa-pen-to-square px-1"}),"Edit Item"]}),t("label",{htmlFor:"delete-item",className:"btn btn-error btn-sm normal-case",onClick:n,children:[e("i",{className:"fa-solid fa-trash-can px-1"}),"Delete Item"]})]})]})})}function ie(l){const n=l.inventory.map((a,s)=>e(de,{inventory:a,numOfItem:s,deleteProduct:l.deleteProduct,handleId:l.handleId},a._id));return t("div",{className:"",children:[t("header",{children:[e("h2",{className:"py-4 text-center text-xl",children:"Inventory"}),e("section",{className:"flex justify-end p-2",children:e("label",{htmlFor:"my-modal-4",className:"btn btn-primary",children:"Add Item"})})]}),e("div",{className:"overflow-auto",children:t("table",{className:"table table-zebra w-full",children:[e("thead",{children:t("tr",{children:[e("th",{}),e("th",{children:"Name"}),e("th",{children:"ID"}),e("th",{children:"Cost"}),e("th",{children:"Qty"}),e("th",{})]})}),n]})})]})}var me="/assets/undrawAddToCart.7baf8961.svg",he="/assets/confettiCone.41229e35.gif";function ue(l){let n=l.soldItems.reduce((c,r)=>c+r.cost,0);console.log(l.soldItems);let a={};for(let c=0;c<l.soldItems.length;c++){let r=l.soldItems[c].product;a[r]?a[r]+=1:a[r]=1}const s=Object.keys(a).map((c,r)=>e("tbody",{className:"",children:t("tr",{className:"",children:[e("th",{className:"bg-secondary text-secondary-content",children:r+1}),e("td",{className:"bg-secondary text-secondary-content text-lg font-semibold",children:c}),t("td",{className:"bg-secondary text-secondary-content text-md",children:["x",e("span",{className:"text-lg font-semibold ml-px",children:a[c]})]}),t("td",{className:"bg-secondary text-secondary-content text-lg font-semibold",children:["$",l.soldItems[r].cost]})]})},r));return t("div",{className:"p-4 flex flex-col justify-around border-2 border-red-400 h-full ",children:[e("h2",{className:"text-2xl font-semibold text-center",children:"Scan items that are ready to be sold!"}),e("div",{className:"flex justify-center",children:t("label",{onClick:l.toggleCamera,htmlFor:"scan-sold-items",className:"btn btn-primary",children:[e("i",{className:"fa-solid fa-camera mr-1"}),"Scan"]})}),l.soldItems.length===0&&e("img",{className:"border-2 border-secondary bg-secondary self-center",src:me,alt:""}),l.soldItems.length>0&&l.showTable?t("div",{className:"flex flex-col gap-y-8",children:[e("div",{className:"overflow-x-auto",children:t("table",{className:"table w-full",children:[e("thead",{className:"",children:t("tr",{children:[e("th",{}),e("th",{children:"Name"}),e("th",{children:"Quantity"}),e("th",{children:"Cost"})]})}),s]})}),t("div",{className:"flex justify-between items-center",children:[t("span",{className:"text-2xl font-medium",children:["Total: $",n]}),e("button",{onClick:l.updateOnCompleteOrder,className:"btn btn-primary",children:"Complete Order"})]})]}):null,l.orderComplete&&t("div",{id:"orderComplete",className:"border-2 border-base-200 h-full",children:[e("img",{className:"m-auto",src:he,alt:""}),e("h3",{className:"text-center text-4xl font-bold py-2",children:"Order Complete!"}),e("h4",{className:"text-center text-xl text-neutral",children:"Thank you for your purchase!"})]})]})}function fe(){const[l,n]=m.exports.useState([]),[a,s]=m.exports.useState([]),[c,r]=m.exports.useState([]),[h,D]=m.exports.useState({}),[N,P]=m.exports.useState(!1),[u,b]=m.exports.useState(!1),[y,g]=m.exports.useState(!0),[v,T]=L.useState({chart:{type:"area",height:350},dataLabels:{enabled:!1},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},series:[{name:"Monthly Sales",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]});async function S(){const d=await fetch("http://localhost:4000/api/inventory"),i=await d.json();d.ok&&s(i)}m.exports.useEffect(()=>{S()},[]);function I(d){s(i=>[...i,d])}async function j(d){const f=await(await fetch("http://localhost:4000/api/inventory/"+d,{method:"DELETE"})).json();s(w=>w.filter(J=>J._id!==f._id)),console.log(d)}function M(d){s(d)}function E(d){const i=a.find(f=>f._id===d);D(i)}function C(){P(d=>!d)}function _(d){const i=a.find(w=>w.id==d),f=new Date;n(w=>[...w,x(p({},i),{date:f})]),o.offDetected(),o.stop(),C(),setTimeout(()=>{C()},1e3)}function $(){let d=l.reduce((i,f)=>i+f.cost,0);T(i=>{let f=[...i.series[0].data];return f[l[0].date.getMonth()]=d,x(p({},i),{series:[{name:"Monthly Sales",data:f}]})}),F(),g(i=>!i),r(i=>[...i,l])}function F(){b(d=>!d)}return t("div",{className:"main-container",children:[e(X,{}),t("div",{id:"drawer",className:"drawer drawer-mobile",children:[e("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),e(Z,{}),e("div",{className:"drawer-content flex flex-col",children:t(U,{children:[e(k,{path:"/",element:e(oe,{inventory:a,soldItems:l,graphOptions:v,latestTransactions:c})}),e(k,{path:"inventory",element:e(ie,{inventory:a,addProduct:I,deleteProduct:j,handleId:E})}),e(k,{path:"sales",element:e(ue,{toggleCamera:C,soldItems:l,updateOnCompleteOrder:$,orderComplete:u,toggleOrderComplete:F,showTable:y})})]})}),e(te,{addProduct:I}),e(ae,{product:h,deleteProduct:j}),e(le,{product:h,inventory:a,updateInventory:M,fetchInventory:S}),e(re,{camera:N,toggleCamera:C,onDetected:_,soldItems:l})]})]})}Y.render(e(L.StrictMode,{children:e(G,{children:e(fe,{})})}),document.getElementById("root"));
