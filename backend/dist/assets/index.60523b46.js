var W=Object.defineProperty,Q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var R=(t,l,n)=>l in t?W(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,x=(t,l)=>{for(var n in l||(l={}))B.call(l,n)&&R(t,n,l[n]);if(q)for(var n of q(l))U.call(l,n)&&R(t,n,l[n]);return t},p=(t,l)=>Q(t,z(l));import{j as A,L as k,r as m,Q as o,_ as Y,R as L,a as G,b as P,c as H,B as K}from"./vendor.98a23334.js";const V=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const s of c)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(c){const s={};return c.integrity&&(s.integrity=c.integrity),c.referrerpolicy&&(s.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?s.credentials="include":c.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(c){if(c.ep)return;c.ep=!0;const s=n(c);fetch(c.href,s)}};V();const e=A.exports.jsx,a=A.exports.jsxs;function X(){return a("div",{className:"navbar bg-primary text-primary-content sticky",children:[e("label",{htmlFor:"my-drawer-2",className:"btn btn-primary drawer-button lg:hidden",children:e("i",{className:"fa-solid fa-bars"})}),e("div",{className:"flex-1",children:e("a",{className:"btn btn-ghost normal-case text-xl",children:"daisyUI"})})]})}function Z(){return a("div",{className:"drawer-side border-2 border-blue-500",children:[e("label",{htmlFor:"my-drawer-2",className:"drawer-overlay"}),a("ul",{className:"menu p-4 w-80 bg-base-100 text-neutral text-xl font-semibold",children:[e("li",{children:e(k,{to:"/dashboard",children:"Dashboard"})}),e("li",{children:e(k,{to:"inventory",children:"Inventory"})}),e("li",{children:e(k,{to:"sales",children:"Sales"})})]})]})}function ee(t){m.exports.useEffect(()=>{o.init({inputStream:{type:"LiveStream",constraints:{width:800,height:300,facingMode:"environment",aspectRatio:{min:1,max:2}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:4,frequency:20,decoder:{readers:["i2of5_reader"]},locate:!0},function(n){return n&&console.log(n,"error msg"),o.start(),()=>{o.stop()}}),o.onProcessed(n=>{var r=o.canvas.ctx.overlay,c=o.canvas.dom.overlay;n&&(n.boxes&&(r.clearRect(0,0,Number(c.getAttribute("width")),Number(c.getAttribute("height"))),n.boxes.filter(function(s){return s!==n.box}).forEach(function(s){o.ImageDebug.drawPath(s,{x:0,y:1},r,{color:"green",lineWidth:2})})),n.box&&o.ImageDebug.drawPath(n.box,{x:0,y:1},r,{color:"#00F",lineWidth:2}),n.codeResult&&n.codeResult.code&&o.ImageDebug.drawPath(n.line,{x:"x",y:"y"},r,{color:"red",lineWidth:3}))}),o.onDetected(l)},[]);function l(n){t.onDetected(n.codeResult.code)}return e("div",{id:"interactive",className:"viewport"})}function te(t){const[l,n]=m.exports.useState(!1),[r,c]=m.exports.useState(null),[s,h]=m.exports.useState({product:"",cost:0,id:"",qty:0});async function D(u){u.preventDefault();const b=x({},s);console.log("what is this: ",b);const g=await fetch("http://localhost:4000/api/inventory",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}}),N=await g.json();g.ok||(h(v=>p(x({},v),{error:N.error})),console.log(s.error)),g.ok&&(h(v=>p(x({},v),{product:"",cost:0,id:"",qty:0,error:null})),t.addProduct(N),console.log("New product added: ",N))}function y(u){const{product:b,cost:g,id:N,qty:v,value:O,name:S}=u.target;h(I=>p(x({},I),{[S]:O}))}function T(u){c(u),h(b=>p(x({},b),{id:u})),n(!1),o.stop()}return a("div",{className:"",children:[e("input",{type:"checkbox",id:"my-modal-4",className:"modal-toggle"}),e("label",{htmlFor:"my-modal-4",className:"modal cursor-pointer items-center",children:a("label",{className:"modal-box rounded-2xl flex flex-col gap-y-2",htmlFor:"",children:[a("form",{onSubmit:D,children:[a("div",{className:"flex gap-x-2",children:[a("div",{className:"flex flex-col grow",children:[e("span",{children:"Product Name"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"product",value:s.product,onChange:y})]}),a("div",{className:"flex flex-col grow",children:[e("span",{children:"Cost"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"cost",value:s.cost,onChange:y})]})]}),e("div",{children:a("div",{className:"flex gap-x-2 items-center",children:[a("div",{className:"flex flex-col grow",children:[a("div",{className:"tooltip tooltip-right pb-2 text-lg self-start","data-tip":"Scan product for ID",children:[e("span",{children:"ID: "}),e("i",{className:"fa-solid fa-circle-info ml-2"})]}),e("input",{value:s.id,onChange:y,name:"id",type:"text",readOnly:!0,placeholder:"Scan for ID...",className:"input input-bordered w-full max-w-xs",required:!0})]}),a("div",{className:"flex flex-col grow",children:[e("span",{className:"pb-2",children:"Qty"}),e("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",value:s.qty,onChange:y,name:"qty"})]})]})}),a("div",{className:"flex justify-between py-3",children:[e("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(u=>!u),children:l?a("span",{children:[e("i",{className:"fa-solid fa-stop"})," Stop"]}):a("span",{children:[e("i",{className:"fa-solid fa-camera"})," Scan"]})}),a("button",{type:"submit",className:"btn btn-primary",children:["Add ",e("i",{className:"fa-solid fa-plus ml-2 text-lg"})]})]})]}),e("div",{className:"container",children:l&&e(ee,{onDetected:T})})]})})]})}function ae(t){function l(){t.deleteProduct(t.product._id)}return a("div",{children:[e("input",{type:"checkbox",id:"delete-item",className:"modal-toggle"}),e("div",{className:"modal",children:a("div",{className:"modal-box relative",children:[e("label",{htmlFor:"delete-item",className:"absolute right-4 top-2 text-neutral hover:text-neutral-focus hover:cursor-pointer",children:e("i",{className:"fa-solid fa-xmark fa-lg"})}),e("div",{className:"flex justify-center",children:e("div",{className:"border-4 border-error p-4 px-8 rounded-full",children:e("i",{className:"fa-solid fa-exclamation text-4xl text-error"})})}),e("p",{className:"py-6 text-center text-xl font-medium",children:"Delete?"}),a("div",{className:"flex justify-evenly",children:[e("label",{htmlFor:"delete-item",className:"btn btn-outline btn-error",onClick:l,children:"Yes, delete"}),e("label",{htmlFor:"delete-item",className:"btn btn-outline",children:"No, cancel"})]})]})})]})}function ne(t){const[l,n]=m.exports.useState({product:"",cost:0,id:"",qty:0});m.exports.useEffect(()=>{Object.keys(t.product).length>0&&n(t.product)},[t.product]);function r(s){n(h=>p(x({},h),{[s.target.name]:s.target.value}))}async function c(){const s=x({},l);await(await fetch("http://localhost:4000/api/inventory/"+t.product._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json(),t.fetchInventory()}return a("div",{children:[e("input",{type:"checkbox",id:"edit-item",className:"modal-toggle"}),e("div",{className:"modal",children:a("div",{className:"modal-box rounded-2xl flex flex-col gap-y-2",children:[e("div",{className:"modal-action m-0",children:e("label",{htmlFor:"edit-item",className:"text-neutral hover:text-neutral-focus hover:cursor-pointer",children:e("i",{className:"fa-solid fa-xmark fa-lg"})})}),a("form",{children:[a("div",{className:"flex gap-x-2",children:[a("div",{className:"flex flex-col grow",children:[e("span",{children:"Product Name"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"product",onChange:r,value:l.product})]}),a("div",{className:"flex flex-col grow",children:[e("span",{children:"Cost"}),e("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"cost",onChange:r,value:l.cost})]})]}),e("div",{children:a("div",{className:"flex gap-x-2 items-center",children:[a("div",{className:"flex flex-col grow",children:[a("div",{className:"tooltip tooltip-right pb-2 text-lg self-start","data-tip":"Scan product for ID",children:[e("span",{children:"ID: "}),e("i",{className:"fa-solid fa-circle-info ml-2"})]}),e("input",{name:"id",type:"text",readOnly:!0,placeholder:"Scan for ID...",className:"input input-bordered w-full max-w-xs",onChange:r,value:l.id,required:!0})]}),a("div",{className:"flex flex-col grow",children:[e("span",{className:"pb-2",children:"Qty"}),e("input",{type:"number",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",name:"qty",onChange:r,value:l.qty})]})]})})]}),e("div",{className:"modal-action",children:e("label",{htmlFor:"edit-item",className:"btn",onClick:c,children:"Save All"})})]})})]})}function le(t){m.exports.useEffect(()=>{o.init({inputStream:{type:"LiveStream",target:document.querySelector("#ScanSoldItems"),constraints:{height:"100%",facingMode:"environment",aspectRatio:{min:1,max:2}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:4,frequency:20,decoder:{readers:["i2of5_reader"]},locate:!0},function(n){return n&&console.log(n,"error msg"),o.start(),()=>{o.stop()}}),o.onProcessed(n=>{var r=o.canvas.ctx.overlay,c=o.canvas.dom.overlay;n&&(n.boxes&&(r.clearRect(0,0,Number(c.getAttribute("width")),Number(c.getAttribute("height"))),n.boxes.filter(function(s){return s!==n.box}).forEach(function(s){o.ImageDebug.drawPath(s,{x:0,y:1},r,{color:"green",lineWidth:2})})),n.box&&o.ImageDebug.drawPath(n.box,{x:0,y:1},r,{color:"#00F",lineWidth:2}),n.codeResult&&n.codeResult.code&&o.ImageDebug.drawPath(n.line,{x:"x",y:"y"},r,{color:"red",lineWidth:3}))}),o.onDetected(l)},[]);function l(n){t.onDetected(n.codeResult.code)}return e("div",{id:"ScanSoldItems",className:"viewport"})}function re(t){function l(r){t.onDetected(r)}function n(){o.offDetected(),o.stop(),t.toggleCamera()}return a("div",{children:[e("input",{type:"checkbox",id:"scan-sold-items",className:"modal-toggle"}),e("div",{className:"modal",children:a("div",{className:"modal-box relative pb-10",children:[a("h3",{className:"text-lg font-bold",children:["Items Scanned: ",t.soldItems.length]}),t.camera&&e(le,{onDetected:l}),!t.camera&&a("span",{className:"block text-primary text-center text-4xl py-6",children:["Item Scanned! ",e("i",{className:"fa-solid fa-square-check"})]}),e("label",{onClick:n,htmlFor:"scan-sold-items",className:"btn btn-md btn-primary absolute right-2 bottom-2",children:"Done"})]})})]})}function ce(t){let l=t.soldItems.reduce((n,r)=>n+r.cost,0);return a("div",{className:"flex flex-col grow p-4 bg-neutral-content rounded-md",children:[a("div",{className:"",children:[e("span",{className:"block font-medium text-neutral",children:"Total Revenue"}),a("h1",{className:"text-4xl font-bold py-2",children:["$",l]})]}),e(Y,{options:t.graphOptions,series:t.graphOptions.series,type:"area",width:"100%",height:"600"})]})}function se(t){let l=new Date;const n=["January","February","March","April","May","June","July","August","September","October","November","December"];return a("div",{className:"flex flex-col gap-y-4 md:flex-row md:gap-x-4",children:[e("div",{className:"stats shadow md:w-1/3 bg-secondary text-secondary-content",children:a("div",{className:"stat",children:[e("div",{className:"stat-title",children:"Inventory Count"}),e("div",{className:"stat-value",children:t.inventory.reduce((r,c)=>r+c.qty,0)-t.soldItems.length}),e("div",{className:"stat-desc",children:"Amount of inventory on hand"})]})}),e("div",{className:"stats shadow md:w-1/3 bg-secondary text-secondary-content",children:a("div",{className:"stat",children:[e("div",{className:"stat-title",children:"Items Sold"}),e("div",{className:"stat-value",children:t.soldItems.length}),e("div",{className:"stat-desc",children:"Total items sold"})]})}),e("div",{className:"stats shadow md:w-1/3 bg-secondary text-secondary-content",children:a("div",{className:"stat",children:[e("div",{className:"stat-title",children:"This Month"}),e("div",{className:"stat-value tracking-wide",children:`$${t.inventory.reduce((r,c)=>r+c.qty,0)}`}),a("div",{className:"stat-desc",children:["Total revenue for ",n[l.getMonth()]]})]})})]})}function oe(t){let l={};for(let r=0;r<t.latestTransactions.length;r++){let c=t.latestTransactions[r].product;l[c]=l[c]?[l[c][0]+1,t.latestTransactions[r].cost,new Date(t.latestTransactions[r].date)]:l[c]=[1,t.latestTransactions[r].cost,new Date(t.latestTransactions[r].date)]}console.log(l);const n=Object.keys(l).map((r,c)=>e("tbody",{children:a("tr",{children:[e("th",{children:c+1}),e("td",{children:r}),e("td",{children:`${l[r][2].getMonth()+1}/${l[r][2].getDate()}/${l[r][2].getFullYear()-2e3}`}),e("td",{children:`$${l[r][1]}`}),e("td",{children:l[r][0]})]})},c));return a("div",{className:"home-container bg-base-200 p-2 overflow-auto h-full",children:[a("section",{className:"flex flex-col xl:flex-row xl:gap-x-4 rounded-md p-2 gap-y-4",children:[e(ce,{soldItems:t.soldItems,graphOptions:t.graphOptions}),a("section",{className:"overflow-auto bg-neutral-content rounded-md p-5",children:[a("div",{children:[e("span",{className:"block text-xl font-bold py-2",children:"Latest Transactions"}),e("span",{className:"block py-2 text-neutral",children:"This is a list of latest transactions"})]}),e("div",{className:"overflow-x-auto",children:a("table",{className:"table table-compact w-full",children:[e("thead",{children:a("tr",{children:[e("th",{}),e("th",{children:"Transaction"}),e("th",{children:"Date"}),e("th",{children:"Cost"}),e("th",{children:"Qty"})]})}),n]})})]})]}),e("section",{className:"flex flex-col p-2 gap-y-4",children:e(se,{inventory:t.inventory,soldItems:t.soldItems})})]})}function de(t){function l(){t.handleId(t.inventory._id),console.log(t.inventory._id)}return e("tbody",{className:"",children:a("tr",{className:"hover border-b-2 border-base-200",children:[e("td",{children:t.numOfItem+1}),e("td",{children:t.inventory.product}),a("td",{children:["#",t.inventory.id.slice(-5)]}),a("td",{children:["$ ",t.inventory.cost]}),e("td",{children:t.inventory.qty}),a("td",{className:"flex gap-x-2",children:[a("label",{htmlFor:"edit-item",className:"btn btn-info btn-sm normal-case",onClick:l,children:[e("i",{className:"fa-solid fa-pen-to-square px-1"}),"Edit Item"]}),a("label",{htmlFor:"delete-item",className:"btn btn-error btn-sm normal-case",onClick:l,children:[e("i",{className:"fa-solid fa-trash-can px-1"}),"Delete Item"]})]})]})})}function ie(t){const l=t.inventory.map((n,r)=>e(de,{inventory:n,numOfItem:r,deleteProduct:t.deleteProduct,handleId:t.handleId},n._id));return a("div",{className:"",children:[a("header",{children:[e("h2",{className:"py-4 text-center text-xl",children:"Inventory"}),e("section",{className:"flex justify-end p-2",children:e("label",{htmlFor:"my-modal-4",className:"btn btn-primary",children:"Add Item"})})]}),e("div",{className:"overflow-auto",children:a("table",{className:"table table-zebra w-full",children:[e("thead",{children:a("tr",{children:[e("th",{}),e("th",{children:"Name"}),e("th",{children:"ID"}),e("th",{children:"Cost"}),e("th",{children:"Qty"}),e("th",{})]})}),l]})})]})}var me="/assets/undrawAddToCart.7baf8961.svg",he="/assets/confettiCone.41229e35.gif";function ue(t){let l=t.soldItems.reduce((c,s)=>c+s.cost,0),n={};for(let c=0;c<t.soldItems.length;c++){let s=t.soldItems[c].product;n[s]?n[s]+=1:n[s]=1}const r=Object.keys(n).map((c,s)=>e("tbody",{className:"",children:a("tr",{className:"",children:[e("th",{className:"bg-secondary text-secondary-content",children:s+1}),e("td",{className:"bg-secondary text-secondary-content text-lg font-semibold",children:c}),a("td",{className:"bg-secondary text-secondary-content text-md",children:["x",e("span",{className:"text-lg font-semibold ml-px",children:n[c]})]}),a("td",{className:"bg-secondary text-secondary-content text-lg font-semibold",children:["$",t.soldItems[s].cost]})]})},s));return a("div",{className:"p-4 flex flex-col justify-around border-2 border-red-400 h-full ",children:[e("h2",{className:"text-2xl font-semibold text-center",children:"Scan items that are ready to be sold!"}),e("div",{className:"flex justify-center",children:a("label",{onClick:t.toggleCamera,htmlFor:"scan-sold-items",className:"btn btn-primary",children:[e("i",{className:"fa-solid fa-camera mr-1"}),"Scan"]})}),t.soldItems.length===0&&e("img",{className:"border-2 border-secondary bg-secondary self-center",src:me,alt:""}),t.soldItems.length>0&&t.showTable?a("div",{className:"flex flex-col gap-y-8",children:[e("div",{className:"overflow-x-auto",children:a("table",{className:"table w-full",children:[e("thead",{className:"",children:a("tr",{children:[e("th",{}),e("th",{children:"Name"}),e("th",{children:"Quantity"}),e("th",{children:"Cost"})]})}),r]})}),a("div",{className:"flex justify-between items-center",children:[a("span",{className:"text-2xl font-medium",children:["Total: $",l]}),e("button",{onClick:t.updateOnCompleteOrder,className:"btn btn-primary",children:"Complete Order"})]})]}):null,t.orderComplete&&a("div",{id:"orderComplete",className:"border-2 border-base-200 h-full",children:[e("img",{className:"m-auto",src:he,alt:""}),e("h3",{className:"text-center text-4xl font-bold py-2",children:"Order Complete!"}),e("h4",{className:"text-center text-xl text-neutral",children:"Thank you for your purchase!"})]})]})}function fe(){const[t,l]=m.exports.useState([]),[n,r]=m.exports.useState([]),[c,s]=m.exports.useState([]),[h,D]=m.exports.useState({}),[y,T]=m.exports.useState(!1),[u,b]=m.exports.useState(!1),[g,N]=m.exports.useState(!0),[v,O]=L.useState({chart:{type:"area",height:350},dataLabels:{enabled:!1},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},series:[{name:"Monthly Sales",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]});async function S(){const d=await fetch("http://localhost:4000/api/inventory"),i=await d.json();d.ok&&r(i)}m.exports.useEffect(()=>{S()},[]);function I(d){r(i=>[...i,d])}async function j(d){const f=await(await fetch("http://localhost:4000/api/inventory/"+d,{method:"DELETE"})).json();r(w=>w.filter(J=>J._id!==f._id)),console.log(d)}function M(d){r(d)}function E(d){const i=n.find(f=>f._id===d);D(i)}function C(){T(d=>!d)}function _(d){const i=n.find(w=>w.id==d),f=new Date;l(w=>[...w,p(x({},i),{date:f})]),o.offDetected(),o.stop(),C(),setTimeout(()=>{C()},1e3)}function $(){let d=t.reduce((i,f)=>i+f.cost,0);O(i=>{let f=[...i.series[0].data];return f[t[0].date.getMonth()]=d,p(x({},i),{series:[{name:"Monthly Sales",data:f}]})}),F(),N(i=>!i),s(i=>[...i,...t])}function F(){b(d=>!d)}return a("div",{className:"main-container",children:[e(X,{}),a("div",{id:"drawer",className:"drawer drawer-mobile",children:[e("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),e(Z,{}),e("div",{className:"drawer-content flex flex-col",children:a(G,{children:[e(P,{path:"/dashboard",element:e(oe,{inventory:n,soldItems:t,graphOptions:v,latestTransactions:c})}),e(P,{path:"inventory",element:e(ie,{inventory:n,addProduct:I,deleteProduct:j,handleId:E})}),e(P,{path:"sales",element:e(ue,{toggleCamera:C,soldItems:t,updateOnCompleteOrder:$,orderComplete:u,toggleOrderComplete:F,showTable:g})})]})}),e(te,{addProduct:I}),e(ae,{product:h,deleteProduct:j}),e(ne,{product:h,inventory:n,updateInventory:M,fetchInventory:S}),e(re,{camera:y,toggleCamera:C,onDetected:_,soldItems:t})]})]})}H.render(e(L.StrictMode,{children:e(K,{children:e(fe,{})})}),document.getElementById("root"));
